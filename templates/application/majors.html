{% extends "application/formbase.html" %}

{% block extra-head %}
{{ block.super }}
<script type="text/javascript" src="{% load adm_media %}{% media_url %}/js/major_selection.js"></script>
{% endblock %}

{% block title %}Choosing majors{% endblock %}

{% block form-body %}
  <form action="{% url apply-majors %}" method="post">
    <table>
      {% for major, selected_rank in majors_prefs %}
        <tr>
	  <td>{{ major.number }}</td><td>{{ major.name }}</td>
	  <td>
	    {% include "application/include/major_rank_select.html" %}
	  </td>
	</tr>
      {% endfor %}
    </table>
    <div class="submission-bar">
      <input type="submit" name="submit" value="เก็บข้อมูล"/>
      <input type="submit" name="cancel" value="ยกเลิก"/>
    </div>
  </form>
  <script>
    $(document).ready(function() {
      MajorSelection.maxRank = {{ max_major_rank }};
      $("select").change(function() {
        if(this.value!="--")
          MajorSelection.shiftSelection(Number(this.value), this);
      });
    });
  </script>
{% endblock %}
