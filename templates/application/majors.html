{% extends "application/formbase.html" %}

{% block extra-head %}
{{ block.super }}
<script type="text/javascript" src="{% load adm_media %}{% media_url %}/js/major_selection.js"></script>
{% endblock %}

{% block title %}Choosing majors{% endblock %}

{% block form-body %}
  <form action="{% url apply-majors %}" method="post">
    <table>
      {% for m in majors %}
        <tr>
	  <td>{{ m.number }}</td><td>{{ m.name }}</td>
	  <td>
	    <select style="width: 50px" name="majors_{{ m.id }}">
	      <option>--</option>
	      {% for i in ranks %}
    	        <option>{{ i }}</option>
	      {% endfor %}
	    </select>
	  </td>
	</tr>
      {% endfor %}
    </table>
    <input type="submit" name="submit" value="เก็บข้อมูล"/>
    <input type="submit" name="cancel" value="ยกเลิก"/>
  </form>
  <script>
    $(document).ready(function() {
      MajorSelection.maxRank = {{ max_major_rank }};
      $("select").change(function() {
        MajorSelection.shiftSelection(Number(this.value), this);
      });
    });
  </script>
{% endblock %}
